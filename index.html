<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Aleatorio de Atajos de Word</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        .container {
            max-width: 700px;
            margin: 0 auto;
            background: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            text-align: left;
        }
        h1 {
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        .question-box {
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .options label {
            display: block;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .options label:hover {
            background-color: #e9ecef;
        }
        .options input[type="radio"] {
            margin-right: 10px;
        }
        button {
            background-color: #007bff; /* Color primario */
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            margin-top: 10px;
            display: block;
            width: 100%;
        }
        button:hover {
            background-color: #0056b3;
        }
        #feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-weight: bold;
            text-align: center;
            display: block; 
        }
        .correct {
            background-color: #d4edda;
            color: #155724;
        }
        .incorrect {
            background-color: #f8d7da;
            color: #721c24;
        }
        .score-box {
            text-align: center;
            padding: 20px;
            border: 2px solid #007bff;
            border-radius: 5px;
            margin-top: 30px;
        }
        .score-box h2 {
            margin-top: 0;
            color: #007bff;
        }
    </style>
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body onload="initQuiz()">

<div class="container">
    <h1>Test Aleatorio de Atajos de Word (10 Preguntas)</h1>
    <div id="quiz-container">
        </div>
    
    <div id="feedback"></div>
    
    <button id="action-button" onclick="handleQuizClick()">Continuar</button> 

    <div id="result-screen" style="display:none;">
        </div>
</div>

<script>
    // El banco de preguntas se mantiene intacto (75 preguntas)
    const questions = [
        { q: "¬øCu√°l es el atajo de teclado para **seleccionar hasta el final de una l√≠nea**?", options: ["MAYUS + FIN", "CTRL + MAYUS + FLECHA DERECHA", "CTRL + ALT + FIN"], correct: "A" },
        { q: "¬øCu√°l es el atajo de teclado para **reducir la selecci√≥n** (Documento > P√°rrafo > Oraci√≥n > Palabra)?", options: ["F8 (Una vez)", "CTRL + E", "MAYUS + F8"], correct: "C" },
        { q: "¬øQu√© combinaci√≥n de teclas se utiliza para **Ver el Men√∫ Contextual** (el men√∫ que aparece al hacer clic derecho)?", options: ["F10 o ALT", "ALT + ESPACIO", "MAYUS + F10"], correct: "C" },
        { q: "¬øCu√°l es el atajo de teclado para **Seleccionar el contenido de la celda siguiente** en una tabla?", options: ["TAB", "MAY√öS + TAB", "ALT + 5"], correct: "A" },
        { q: "¬øQu√© tecla de funci√≥n, al usarse sola, te permite **Elegir el comando 'Guardar como'**?", options: ["F5", "F12", "MAY√öS + F12"], correct: "B" },
        { q: "Para **Quitar la selecci√≥n** de texto o gr√°ficos usando una tecla de funci√≥n, ¬øqu√© atajo debes usar?", options: ["F8", "MAY√öS + F8", "CTRL + F8"], correct: "B" },
        { q: "¬øCu√°l es la combinaci√≥n de teclas para **Mostrar/Ocultar todos los campos** del documento activo?", options: ["ALT + F9", "CTRL + F9", "MAY√öS + F9"], correct: "A" },
        { q: "Si quieres volver a la vista preliminar y las opciones de impresi√≥n desde la vista de edici√≥n de un documento, ¬øqu√© atajo de teclado puedes usar?", options: ["ALT + CTRL + 1 / CTRL + F2 / CTRL + MAYUS + F12", "F12", "CTRL + P"], correct: "A" },
        { q: "¬øQu√© atajo de teclado se utiliza para **Aumentar un nivel de un p√°rrafo** dentro de un esquema de documento?", options: ["ALT + MAYUS + FLECHA ARRIBA", "ALT + MAYUS + FLECHA DERECHA / TABULADOR", "CTRL + MAYUS + A"], correct: "B" },
        { q: "¬øCu√°l es el atajo de teclado para **Insertar un campo hora** en la posici√≥n actual del documento?", options: ["ALT + MAYUS + F", "ALT + MAYUS + H", "ALT + MAYUS + P"], correct: "B" },
        { q: "¬øQu√© atajo de teclado te permite pasar a la vista **Borrador** del documento?", options: ["ALT + CTRL + D", "ALT + CTRL + N", "ALT + CTRL + Q"], correct: "B" },
        { q: "¬øCu√°l es el atajo de teclado para **Eliminar manualmente el formato de Fuente** (como negrita, cursiva o tama√±o)?", options: ["CTRL + ESPACIO", "CTRL + MAYUS + C", "CTRL + ALT + <"], correct: "A" },
        { q: "¬øQu√© atajo de teclado se utiliza para **Activar/Desactivar la funci√≥n Dividir Ventana** en Word?", options: ["ALT + MAY√öS + C", "CTRL + ALT + V", "CTRL + ("], correct: "B" },
        { q: "¬øCu√°l de estas combinaciones de teclas sirve para aplicar el formato **Sub√≠ndice** (Solo en la versi√≥n en ingl√©s de Word)?", options: ["CTRL + SIGNO M√ÅS", "CTRL + MAY√öS + P", "CTRL + ="], correct: "C" },
        { q: "¬øQu√© combinaci√≥n de teclas se utiliza para **Mover los p√°rrafos seleccionados hacia abajo** dentro de un esquema de documento?", options: ["ALT + MAYUS + FLECHA ABAJO", "CTRL + FLECHA ABAJO", "MAYUS + FLECHA ABAJO"], correct: "A" },
        { q: "¬øQu√© atajo de teclado te permite **Abrir el Panel de Ayuda de Word 365**?", options: ["ALT + Q", "F1", "CTRL + ("], correct: "B" },
        { q: "Para **Subrayar palabras, pero no los espacios** entre ellas, ¬øqu√© atajo de teclado debes utilizar?", options: ["CTRL + S", "CTRL + MAYUS + P", "CTRL + MAYUS + D"], correct: "B" },
        { q: "¬øQu√© atajo de teclado te permite **Seleccionar hasta el principio de la pantalla** desde el punto de inserci√≥n actual?", options: ["MAYUS + RE PAG", "CTRL + MAYUS + INICIO", "CTRL + ALT + RE P√ÅG"], correct: "A" },
        { q: "¬øQu√© tecla de funci√≥n te permite elegir el comando **Ortograf√≠a** (en la pesta√±a Revisi√≥n)?", options: ["F5", "F7", "MAYUS + F7"], correct: "B" },
        { q: "¬øCu√°l de estos atajos se utiliza para **Copiar formato** (es decir, el formato de la fuente, el tama√±o, etc.)?", options: ["CTRL + C", "CTRL + MAY√öS + V", "CTRL + MAYUS + C"], correct: "C" },
        { q: "¬øQu√© combinaci√≥n de teclas se utiliza para **Repetir la √∫ltima acci√≥n o comando**?", options: ["F4 / ALT + ENTER", "CTRL + Y / ALT + MAY√öS + RETROCESO", "MAYUS + F4"], correct: "A" },
        { q: "¬øQu√© combinaci√≥n de teclas sirve para **Disminuir el tama√±o de fuente un valor preestablecido**?", options: ["CTRL + <", "CTRL + ALT + <", "CTRL + ALT + MAYUS + >"], correct: "A" },
        { q: "¬øCu√°l es la combinaci√≥n de teclas para crear un **Espacio de no separaci√≥n**?", options: ["CTRL + GUION", "CTRL + MAY√öS + ESPACIO", "MAYUS + ENTER"], correct: "B" },
        { q: "¬øQu√© atajo de teclado se utiliza para **Mostrar todos los elementos ocultos** (como marcas de p√°rrafo, espacios, o guiones de no separaci√≥n)?", options: ["CTRL + (", "CTRL + ALT + D", "ALT + CTRL + Q"], correct: "A" },
        { q: "¬øQu√© atajo de teclado te permite seleccionar la **Primera celda de una columna** en una tabla?", options: ["ALT + INICIO", "ALT + RE PAG", "ALT + AV PAG"], correct: "B" },
        { q: "¬øCu√°l es el atajo de teclado para **Eliminar todo el formato de p√°rrafo** (como alineaci√≥n, sangr√≠a, o interlineado)?", options: ["CTRL + 0", "CTRL + W", "CTRL + ESPACIO"], correct: "B" },
        { q: "¬øQu√© atajo de teclado te permite **Desplazarse al √∫ltimo cambio** (es decir, volver al punto donde se hizo la √∫ltima edici√≥n)?", options: ["F5", "MAYUS + F5", "MAYUS + F4"], correct: "B" },
        { q: "¬øQu√© atajo de teclado te permite seleccionar la **√öltima celda de una columna** en una tabla?", options: ["ALT + FIN", "ALT + RE PAG", "ALT + AV PAG"], correct: "C" },
        { q: "¬øQu√© atajo de teclado se utiliza para **Cambiar may√∫sculas o min√∫sculas** (alternar entre todo en may√∫sculas, todo en min√∫sculas, y tipo oraci√≥n)?", options: ["CTRL + MAYUS + U", "MAYUS + F3", "CTRL + L"], correct: "B" },
        { q: "¬øQu√© atajo de teclado te permite **Alinear Justificado** el p√°rrafo seleccionado?", options: ["CTRL + Q", "CTRL + T", "CTRL + J"], correct: "C" },
        { q: "¬øQu√© tecla de funci√≥n se utiliza para **Actualizar campos de Word seleccionados** (como una tabla de contenido o un campo de fecha)?", options: ["F4", "F9", "F12"], correct: "B" },
        { q: "¬øQu√© combinaci√≥n de teclas sirve para **Alinear Distribuida** el p√°rrafo seleccionado?", options: ["CTRL + T", "CTRL + D", "CTRL + MAYUS + J"], correct: "C" },
        { q: "¬øCu√°l es el atajo de teclado para **Marcar una entrada de √çndice**?", options: ["ALT + MAYUS + F", "ALT + MAYUS + X", "CTRL + ALT + X"], correct: "B" },
        { q: "¬øQu√© combinaci√≥n de teclas te permite mover el punto de inserci√≥n **Al principio de la ventana actual**?", options: ["CTRL + ALT + RE P√ÅG", "CTRL + INICIO", "RE P√ÅG"], correct: "A" },
        { q: "Si deseas **Pegar formato** previamente copiado, ¬øqu√© atajo de teclado debes utilizar?", options: ["CTRL + V", "CTRL + MAY√öS + V", "CTRL + X"], correct: "B" },
        { q: "¬øQu√© atajo de teclado te permite seleccionar **Una tabla entera**?", options: ["MAY√öS + F8", "ALT + 5", "CTRL + E"], correct: "B" },
        { q: "¬øQu√© atajo de teclado se utiliza para **Insertar un campo n√∫mero de p√°gina** en la posici√≥n actual?", options: ["ALT + MAYUS + F", "ALT + MAYUS + P", "ALT + MAYUS + H"], correct: "B" },
        { q: "¬øCu√°l es la acci√≥n que se ejecuta al presionar **CTRL + 0**?", options: ["Interlineado sencillo", "Espaciado anterior de 12 pto", "Quitar la sangr√≠a izquierda"], correct: "B" },
        { q: "¬øQu√© atajo de teclado te permite **Seleccionar hasta el inicio de un p√°rrafo** desde la posici√≥n actual del cursor?", options: ["MAYUS + INICIO", "CTRL + MAYUS + FLECHA ARRIBA", "CTRL + MAYUS + FLECHA IZQUIERDA"], correct: "B" },
        { q: "¬øQu√© combinaci√≥n de teclas te permite mover el punto de inserci√≥n **Al final de la ventana actual**?", options: ["CTRL + FIN", "AV P√ÅG", "CTRL + ALT + AV P√ÅG"], correct: "C" },
        { q: "¬øQu√© atajo de teclado te permite **Cambiar la familia de Fuente** cuando est√°s dentro del cuadro de di√°logo Fuente?", options: ["CTRL + M", "CTRL + MAYUS + F", "CTRL + N"], correct: "B" },
        { q: "¬øQu√© combinaci√≥n de teclas te permite **Quitar la sangr√≠a francesa** de un p√°rrafo?", options: ["CTRL + F", "CTRL + H", "CTRL + MAYUS + H"], correct: "C" },
        { q: "¬øQu√© atajo de teclado te permite **Seleccionar hasta el final de una ventana**?", options: ["CTRL + MAY√öS + FIN", "MAY√öS + AV PAG", "ALT + CTRL + MAYUS + AV PAG"], correct: "C" },
        { q: "¬øQu√© combinaci√≥n de teclas se utiliza para **Insertar un hiperv√≠nculo** en el documento?", options: ["CTRL + H", "CTRL + K", "CTRL + I"], correct: "B" },
        { q: "¬øQu√© combinaci√≥n de teclas se utiliza para aplicar **Interlineado doble** (separaci√≥n de 2 l√≠neas)?", options: ["CTRL + 1", "CTRL + 2", "CTRL + 5"], correct: "B" },
        { q: "**Seg√∫n tu uso**, ¬øqu√© atajo de teclado se utiliza para **Abrir el cuadro de di√°logo Fuente** (para cambiar tama√±o, estilo, color, etc.)?", options: ["CTRL + M", "CTRL + E", "CTRL + ALT + S"], correct: "A" },
        { q: "¬øCu√°l es la combinaci√≥n de teclas para **Establecer interlineado de 1,5 l√≠neas**?", options: ["CTRL + 1", "CTRL + 5", "CTRL + 2"], correct: "B" },
        { q: "¬øCu√°l es la combinaci√≥n de teclas para **Seleccionar hasta el principio de la palabra** desde el punto de inserci√≥n actual?", options: ["MAYUS + FLECHA IZQUIERDA", "CTRL + MAYUS + FLECHA IZQUIERDA", "CTRL + MAYUS + INICIO"], correct: "B" },
        { q: "¬øQu√© atajo de teclado te permite **Marcar Cita**?", options: ["ALT + MAYUS + I", "ALT + MAYUS + X", "ALT + MAYUS + O"], correct: "A" },
        { q: "¬øQu√© atajo de teclado te permite **Seleccionar una letra (car√°cter) a la izquierda**?", options: ["MAY√öS + FLECHA IZQUIERDA", "CTRL + MAY√öS + FLECHA IZQUIERDA", "MAY√öS + RETROCESO"], correct: "A" },
        { q: "¬øQu√© combinaci√≥n de teclas se utiliza para **Mover el cursor al final del documento**?", options: ["FIN", "CTRL + FIN", "ALT + FIN"], correct: "B" },
        { q: "¬øQu√© atajo de teclado te permite pasar a la vista **Dise√±o de impresi√≥n**?", options: ["ALT + CTRL + D", "ALT + CTRL + N", "ALT + CTRL + Q"], correct: "A" },
        { q: "¬øCu√°l es el atajo de teclado para **Insertar un campo fecha** en la posici√≥n actual?", options: ["ALT + MAYUS + F", "ALT + MAYUS + H", "ALT + MAYUS + P"], correct: "A" },
        { q: "¬øQu√© atajo de teclado te permite **Crear una sangr√≠a Francesa** en un p√°rrafo?", options: ["CTRL + F", "CTRL + H", "CTRL + MAYUS + H"], correct: "A" },
        { q: "¬øQu√© atajo de teclado te permite **Mover el punto de inserci√≥n una palabra a la izquierda**?", options: ["CTRL + FLECHA IZQUIERDA", "FLECHA IZQUIERDA", "CTRL + MAYUS + FLECHA IZQUIERDA"], correct: "A" },
        { q: "¬øCu√°l es el atajo de teclado para **Seleccionar una letra (car√°cter) a la derecha**?", options: ["MAY√öS + FLECHA DERECHA", "CTRL + MAY√öS + FLECHA DERECHA", "MAY√öS + ENTER"], correct: "A" },
        
        // PREGUNTAS NUEVAS Y AJUSTADAS
        { q: "¬øQu√© combinaci√≥n de teclas se utiliza para **Insertar una nota al pie**?", options: ["ALT + CTRL + F", "ALT + CTRL + O", "ALT + CTRL + L"], correct: "B" },
        { q: "¬øQu√© combinaci√≥n de teclas se utiliza para **Insertar una nota al final** del documento (Endnote)?", options: ["ALT + CTRL + L", "ALT + CTRL + F", "ALT + CTRL + O"], correct: "A" },
        { q: "¬øQu√© combinaci√≥n de teclas sirve para **Disminuir el tama√±o de fuente un valor preestablecido** (ej. de 12 a 11)?", options: ["CTRL + [", "CTRL + <", "CTRL + ALT + <"], correct: "B" },
        { q: "¬øQu√© atajo de teclado se utiliza para **Mover el punto de inserci√≥n al final del p√°rrafo** actual?", options: ["FIN", "CTRL + FIN", "CTRL + FLECHA ABAJO"], correct: "C" },
        { q: "Para **Aumentar el tama√±o de fuente un valor preestablecido** (ej. de 11 a 12), ¬øqu√© combinaci√≥n de teclas debes utilizar?", options: ["CTRL + [", "CTRL + MAYUS + >", "CTRL + ALT + >"], correct: "B" },
        { q: "¬øQu√© atajo de teclado te permite seleccionar hasta el **final de la palabra** desde el punto de inserci√≥n actual?", options: ["MAYUS + FIN", "CTRL + MAYUS + FLECHA DERECHA", "MAYUS + FLECHA DERECHA"], correct: "B" },
        { q: "¬øQu√© atajo de teclado se utiliza para **Mover el punto de inserci√≥n al inicio del p√°rrafo** actual?", options: ["INICIO", "CTRL + INICIO", "CTRL + FLECHA ARRIBA"], correct: "C" },
        { q: "¬øQu√© combinaci√≥n de teclas te permite **Alinear un p√°rrafo a la izquierda** (restaurando la alineaci√≥n por defecto)?", options: ["CTRL + Q", "CTRL + I", "CTRL + Z"], correct: "A" },
        { q: "¬øQu√© tecla de funci√≥n te permite elegir el comando **Ir a** (Go To) para buscar un elemento espec√≠fico?", options: ["F3", "F5", "MAYUS + F5"], correct: "B" },
        { q: "¬øQu√© combinaci√≥n de teclas se utiliza para **Quitar la sangr√≠a izquierda** de un p√°rrafo?", options: ["CTRL + H", "CTRL + MAYUS + R", "CTRL + MAYUS + T"], correct: "B" },
        { q: "¬øQu√© atajo de teclado se utiliza para **Mostrar los c√≥digos de campo** de un campo seleccionado?", options: ["ALT + F9", "MAYUS + F9", "CTRL + F9"], correct: "B" },
        { q: "¬øQu√© atajo de teclado se utiliza para **Aplicar una Sangr√≠a Izquierda** a un p√°rrafo?", options: ["CTRL + M", "CTRL + H", "CTRL + J"], correct: "B" },
        { q: "¬øQu√© atajo de teclado te permite **Aumentar el tama√±o de fuente en 1 punto exacto**?", options: ["CTRL + MAYUS + ALT + >", "CTRL + ALT + MAYUS + >", "CTRL + ]"], correct: "B" },
        { q: "¬øQu√© atajo de teclado se utiliza para **Mover el punto de inserci√≥n una palabra a la derecha**?", options: ["FLECHA DERECHA", "CTRL + FLECHA DERECHA", "ALT + FLECHA DERECHA"], correct: "B" },
        { q: "¬øQu√© combinaci√≥n de teclas se utiliza para **Disminuir el tama√±o de fuente en 1 punto exacto**?", options: ["CTRL + MAYUS + <", "CTRL + ALT + <", "CTRL + ["], correct: "B" },
        { q: "¬øQu√© atajo de teclado te permite **Seleccionar hasta el final del p√°rrafo** desde la posici√≥n actual del cursor?", options: ["MAYUS + FIN", "CTRL + MAYUS + FLECHA ABAJO", "MAYUS + AV P√ÅG"], correct: "B" },
       { q: "¬øQu√© combinaci√≥n de teclas aplica en formato may√∫sculas?", options: ["CTRL + MAYUS + >", "MAYUS + F3", "CTRL + MAYUS + U"], correct: "C" },
       { q: "¬øQu√© efecto tiene la combinaci√≥n de teclas CTRL + MAYUS + L?", options: ["Aplica el formato Versalitas", "Aplica el formato Cursiva", "S√≠mbolo de Copyright"], correct: "A" },
       { q: "¬øQu√© atajo de teclado de Word 365 aplica el s√≠mbolo de Marca Registrada?", options: ["CTRL + ALT + C", "CTRL + ALT + R", "CTRL + ALT + T"], correct: "B" },
       { q: "¬øQu√© combinaci√≥n utilizaremos en Word 365 para hacer un salto de l√≠nea?", options: ["MAYUS + ENTER", "CTRL + ENTER", "ALT + ENTER"], correct: "A" },
       { q: "Una de las siguientes combinaciones se utiliza para aplicar al texto un gui√≥n de no separaci√≥n, ¬øcu√°l es?", options: ["CTRL + GUION", "CTRL + MAYUS + GUION", "CTRL + MAYUS + ESPACIO"], correct: "B" },
       { q: "¬øC√≥mo puedo aplicar en mi texto puntos suspensivos?", options: ["Clic tres veces en el bot√≥n punto", "CTRL + ALT + PUNTO", "CTRL + MAYUS + PUNTO "], correct: "B" },
       { q: "Si tengo creada una tabla en Word 365 y quiero situarme en la primera celda de una fila, ¬øQu√© combinaci√≥n de teclas deber√© usar?", options: ["ALT + RE PAG", "ALT + FLECHA ARRIBA", "ALT + INICIO"], correct: "C" },
       { q: "Quiero crear una tabulaci√≥n dentro de mi celda de la tabla de Word 365, para ello debo utilizar una de las siguientes combinaciones:", options: ["CTRL + TAB", "MAYUS + TAB", "TAB"], correct: "A" },
       { q: "¬øQu√© funci√≥n tiene el atajo de teclado MAYUS + F7?", options: ["Abre el comando Ortograf√≠a", "Abre el panel de Sin√≥nimos", "Abre el comando Ir a"], correct: "B" },
       { q: "¬øQu√© atajo de teclado utilizaremos para repetir una acci√≥n de Buscar o Ir a", options: ["CTRL + F4", "F4", "MAYUS + F4"], correct: "C" },
       { q: "¬øQu√© combinaci√≥n de teclas mostrar√°/Ocultar√° campos seleccionados?", options: ["MAYUS + F9", "ALT + F9", "MAYUS + F5"], correct: "A" },
       { q: "¬øQu√© hace la combinaci√≥n MAYUS + F5 en Word 365?", options: ["Repetir una acci√≥n de Buscar o Ir a", "Desplazarse al √∫ltimo cambio", "Repetir la √∫ltima acci√≥n"], correct: "B" },
       { q: "¬øQu√© combinaci√≥n nos permite buscar el siguiente error ortogr√°fico o gramatical", options: ["ALT + F7", "MAYUS + F7", "CTRL + MAYUS + F7"], correct: "A" },
       { q: "¬øQu√© atajo de teclado usaremos si queremos salir de Microsoft Word 365?", options: ["CTRL + SUPRIMIR", "MAYUS + F12", "ALT + F4"], correct: "C" },

    ];

    // Variables globales actualizadas
    let currentQuestionIndex = 0;
    let score = 0;
    const quizSize = 10;
    let currentQuizQuestions = []; // Array que contendr√° las 10 preguntas aleatorias del test actual
    let totalQuestions = quizSize;

    const quizContainer = document.getElementById('quiz-container');
    const actionButton = document.getElementById('action-button');
    const feedbackDiv = document.getElementById('feedback');
    let quizState = 'CHECK_ANSWER'; 

    /**
     * 1. Genera una selecci√≥n aleatoria de 10 preguntas del banco completo.
     */
    function getRandomQuestions() {
        const fullBank = [...questions]; // Copia el banco completo
        
        // Algoritmo Fisher-Yates (Shuffle) para mezclar el array de forma eficiente
        for (let i = fullBank.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [fullBank[i], fullBank[j]] = [fullBank[j], fullBank[i]]; // Intercambio
        }
        
        // Selecciona las primeras 10 preguntas (el nuevo test)
        currentQuizQuestions = fullBank.slice(0, quizSize);
        
        // Reinicia el estado del test
        currentQuestionIndex = 0;
        score = 0;
        totalQuestions = currentQuizQuestions.length;
    }

    /**
     * 2. Inicializa el quiz: genera preguntas y carga la primera.
     */
    function initQuiz() {
        getRandomQuestions();
        loadQuestion();
    }

    /**
     * 3. Carga la pregunta actual usando el array aleatorio.
     */
    function loadQuestion() {
        if (currentQuestionIndex >= totalQuestions) {
            showResults();
            return;
        }

        const qData = currentQuizQuestions[currentQuestionIndex];
        const optionLabels = ["A", "B", "C"];
        
        let html = `<div class="question-box">
            <p><strong>Pregunta ${currentQuestionIndex + 1} de ${totalQuestions}:</strong> ${qData.q}</p>
            <div class="options">`;

        qData.options.forEach((option, index) => {
            const label = optionLabels[index];
            html += `<label>
                <input type="radio" name="question" value="${label}">
                ${label}) ${option}
            </label>`;
        });

        html += `</div></div>`;
        quizContainer.innerHTML = html;
        
        actionButton.textContent = "Verificar Respuesta";
        feedbackDiv.innerHTML = 'Selecciona una opci√≥n.'; 
        feedbackDiv.className = ''; // Limpia el color de fondo del feedback
        quizState = 'CHECK_ANSWER';
    }

    function checkAnswer() {
        const selectedOption = document.querySelector('input[name="question"]:checked');
        
        if (!selectedOption) {
            alert("Por favor, selecciona una respuesta antes de verificar.");
            return; 
        }

        const userAnswer = selectedOption.value;
        const correct = currentQuizQuestions[currentQuestionIndex].correct;
        const correctOptionText = currentQuizQuestions[currentQuestionIndex].options[correct.charCodeAt(0) - 'A'.charCodeAt(0)];

        // Deshabilitar opciones
        document.querySelectorAll('input[name="question"]').forEach(input => {
            input.disabled = true;
        });

        if (userAnswer === correct) {
            score++;
            feedbackDiv.className = 'correct';
            feedbackDiv.innerHTML = `‚úÖ **¬°Respuesta Correcta!** Puntuaci√≥n: ${score}/${currentQuestionIndex + 1}`;
        } else {
            feedbackDiv.className = 'incorrect';
            feedbackDiv.innerHTML = `‚ùå **Respuesta Incorrecta.** La correcta era **${correct}) ${correctOptionText}**. Puntuaci√≥n: ${score}/${currentQuestionIndex + 1}`;
        }

        // Preparar para avanzar
        actionButton.textContent = (currentQuestionIndex < totalQuestions - 1) ? "Siguiente Pregunta" : "Ver Resultados Finales";
        quizState = 'ADVANCE';
    }

    function advanceQuestion() {
        currentQuestionIndex++;
        loadQuestion();
    }

    function handleQuizClick() {
        if (quizState === 'CHECK_ANSWER') {
            checkAnswer();
        } else if (quizState === 'ADVANCE') {
            advanceQuestion();
        }
    }

    /**
     * 4. Muestra resultados y el bot√≥n para un nuevo test.
     */
    function showResults() {
        quizContainer.style.display = 'none';
        actionButton.style.display = 'none';
        feedbackDiv.style.display = 'none';
        
        const resultScreen = document.getElementById('result-screen');
        resultScreen.innerHTML = `
            <div class="score-box">
                <h2>üéâ Test Finalizado üéâ</h2>
                <p>Has respondido correctamente <span id="final-score">${score}</span> de <span id="total-questions">${totalQuestions}</span> preguntas.</p>
                <p style="font-size: 1.1em; font-weight: bold; color: #ff5722;">¬°Mucha suerte en el examen!</p>
                <button onclick="startNewQuiz()">Generar Nuevo Test de ${quizSize} Preguntas</button>
            </div>
        `;
        resultScreen.style.display = 'block';
    }

    /**
     * 5. Reinicia el quiz generando un nuevo conjunto de 10 preguntas.
     */
    function startNewQuiz() {
        // Resetear la vista y generar nuevo test
        document.getElementById('result-screen').style.display = 'none';
        quizContainer.style.display = 'block';
        actionButton.style.display = 'block';
        feedbackDiv.style.display = 'block';

        getRandomQuestions();
        loadQuestion();
    }
</script>

</body>
</html>